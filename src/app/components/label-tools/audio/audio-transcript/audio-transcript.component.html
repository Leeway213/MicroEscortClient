<div class="root-panel">
  <div class="wave-panel">
    <div #waveFormElement id="waveform" (mousewheel)="changeZoom($event)"></div>
    <div id="waveform-timeline"></div>
  </div>
  <div class="control-panel">
    <button (click)="switch(playbtn)" class="play-btn" #playbtn>播放</button>
  </div>
</div>
<div class="data-wrap">
    <label class="content-label" for="text">文本输入：</label>
    <input #content type="text" name="text" class="data-content" [disabled]='addRegionState'/>
    <button class="data-comfirm" (click)="commit(content)" [class.grayed]="addRegionState" [disabled]='addRegionState'>确定</button>
    <button class="data-comfirm" (click)="clearRegions()" [class.grayed]="editRow!==null">清除行选择</button>
    <div class="data-list">
        <nz-table #nzTable  
        [nzDataSource]="tableData" 
        [nzPageSize]="5"
        nzShowSizeChanger>
            <thead nz-thead>
              <tr>
                <th nz-th [nzWidth]="'200px'"><span>开始时间</span></th>
                <th nz-th [nzWidth]="'200px'"><span>结束时间</span></th>
                <th nz-th>
                  <span>文本内容</span>
                </th>
                <th nz-th [nzWidth]="'150px'">
                  <span>操作</span>
                </th>
              </tr>
            </thead>
            <tbody nz-tbody>
              <tr nz-tbody-tr  *ngFor="let trdata of nzTable.data;let i=index;" (click)="rowSelect(trdata)" [class.selected]="i==selectRow">
                <td nz-td>{{trdata.startTime|number:'2.3-3'|transformTime}}</td>
                <td nz-td>{{trdata.endTime|number:'2.3-3'|transformTime}}</td>
                <td nz-td>
                  <span *ngIf="editRow!==trdata.key">{{trdata.content}}</span>
                  <span *ngIf="editRow===trdata.key">
                    <nz-input [(ngModel)]="tempEditObject[trdata.key].content"></nz-input>
                  </span>
                </td>
                <td nz-td>
                    <span *ngIf="editRow!==trdata.key">
                      <a (click)="edit(trdata)">Edit</a>
                    </span>
                    <span *ngIf="editRow!==trdata.key">
                        <a (click)="delete(trdata)">Delete</a>
                      </span>
                    <span *ngIf="editRow===trdata.key">
                      <a (click)="save(trdata)">Save</a>
                      <span nz-table-divider></span>
                        <nz-popconfirm [nzTitle]="'Sure to cancel?'" (nzOnConfirm)="cancel(trdata)">
                          <a nz-popconfirm>Cancel</a>
                        </nz-popconfirm>
                    </span>
                </td>
              </tr>
            </tbody>
        </nz-table>
    </div>
</div>

