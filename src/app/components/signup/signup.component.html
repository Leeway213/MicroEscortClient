<form class="form-container" (submit)="signup()"  [formGroup]="signupForm">
  <h2>{{userService.role}} 注册</h2>
    <div style="width: 100%;">
      <mat-form-field class="input-field">
        <input matInput required [formControl]="usernameFormControl" placeholder="用户名" value="" (change)="onUsernameChanged($event)">
        <div [ngClass]="{ 'invisible': !usernameValidating }" matSuffix>
          <mat-progress-spinner mode="indeterminate" color="warn" [strokeWidth]="1.9" [diameter]="23"></mat-progress-spinner>
        </div>
        <mat-error *ngIf="usernameFormControl.hasError('required')">
          <strong>必须填写用户名</strong>
        </mat-error>
        <mat-error *ngIf="usernameFormControl.hasError('pattern')">
          只能输入5-20个, 以字母开头、可带数字、“_”、“.”的字串
        </mat-error>
        <mat-error *ngIf="usernameFormControl.hasError('isUserExists')">
          该用户名
          <strong>已存在</strong>
        </mat-error>
        <mat-error *ngIf="usernameFormControl.hasError('networkFailure')">
          网络请求失败
        </mat-error>
      </mat-form-field>
      <mat-form-field class="input-field">
        <input #pass matInput required [formControl]="passwordFormControl" type="password" placeholder="密码" value="">
        <mat-hint *ngIf="!pass.value" align="start">密码必须
          <strong>同时包含字母、数字、特殊字符(!@#$%^&*)中的两种</strong>。</mat-hint>
        <mat-error *ngIf="passwordFormControl.hasError('required')">
          <strong>必须填写密码</strong>
        </mat-error>
        <mat-error *ngIf="passwordFormControl.hasError('pattern')">
          密码必须
          <strong>同时包含字母、数字、特殊字符(!@#$%^&*)中的两种</strong>。
        </mat-error>
      </mat-form-field>
      <mat-form-field class="input-field">
        <input matInput [formControl]="emailFormControl" placeholder="邮箱" value="">
        <mat-error *ngIf="emailFormControl.hasError('email')">
          邮箱格式不正确
        </mat-error>
      </mat-form-field>

      <button mat-raised-button [disabled]="!signupForm.valid" color="accent" type="submit" class="submit-button">注册</button>
      <a [routerLink]="['/login']">已经有一个账户了？登录</a>
      <mat-error *ngIf="signupForm.hasError('signupFailed')">
        
      </mat-error>
    </div>
</form>
